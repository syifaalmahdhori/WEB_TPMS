<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Membership Function – TPMS Fuzzy Sugeno</title>

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>

  <style>
    body { background:#0b1220; color:#e9edf3; }

    /* ===== SIDEBAR ===== */
    :root {
      --sidebar-w: 256px;
      --sidebar-bg: #0e1626;
      --sidebar-border: #1f2b46;
      --sidebar-link: #c7d2e5;
      --sidebar-link-active-bg: #16233b;
      --sidebar-link-active: #ffffff;
    }
    .topbar {
      position: sticky; top: 0; z-index: 1050;
      background: #0b1220; border-bottom: 1px solid #1f2b46;
    }
    .content-wrap { transition: margin-left .25s ease; }
    .sidebar {
      position: fixed; inset: 0 auto 0 0; width: var(--sidebar-w);
      background: var(--sidebar-bg); border-right: 1px solid var(--sidebar-border);
      transform: translateX(-100%);
      transition: transform .25s ease; padding-top: 60px; z-index: 1040;
    }
    .sidebar.show { transform: translateX(0); }
    @media (min-width: 992px){
      .sidebar { transform: none; padding-top: 0; }
      .content-wrap { margin-left: var(--sidebar-w); }
      .topbar .btn-toggle { display: none; }
    }
    .sidebar .brand {
      padding: 16px 18px; border-bottom: 1px solid var(--sidebar-border);
      font-weight: 700;
    }
    .sidebar .nav-link {
      color: var(--sidebar-link);
      padding: 10px 16px; border-radius: .5rem; margin: 4px 8px;
    }
    .sidebar .nav-link:hover { background: rgba(255,255,255,.05); color: #fff; }
    .sidebar .nav-link.active { background: var(--sidebar-link-active-bg); color: var(--sidebar-link-active); }
    .sidebar small.section {
      display: block; color: #8fa1bf; padding: 10px 18px 4px;
      margin-top: 8px; text-transform: uppercase; font-size: .73rem;
    }

    /* ===== KONTEN ===== */
    .card { background:#121a2b; border:1px solid #1f2b46; }
    .card-header { background:#0e1626; border-bottom:1px solid #1f2b46; color:#fff; }
    .mono { color:rgb(0,224,255); font-family: ui-monospace, monospace; }
    a { color:#9ec1ff; }
    .table thead th { color:#a7b3c6; }
  </style>
</head>
<body>
  <!-- TOPBAR -->
  <div class="topbar">
    <div class="container-fluid py-2 d-flex align-items-center justify-content-between">
      <button class="btn btn-outline-light btn-sm btn-toggle" onclick="toggleSidebar()">☰</button>
      <div class="small text-muted">TPMS – Membership Function</div>
    </div>
  </div>

  <!-- SIDEBAR -->
  <nav id="sidebar" class="sidebar">
    <div class="brand">TPMS Dashboard</div>
    <small class="section">Navigasi</small>
    <ul class="nav flex-column mb-2">
      <li class="nav-item"><a class="nav-link" href="index.html">Beranda</a></li>
      <li class="nav-item"><a class="nav-link active" href="membership.html">Membership Function</a></li>
      <li class="nav-item"><a class="nav-link" href="rules.html">Aturan (Rule Base)</a></li>
      <li class="nav-item"><a class="nav-link" href="charts.html">Grafik & Hasil</a></li>
      <li class="nav-item"><a class="nav-link" href="realtime.html">Realtime</a></li>
      <li class="nav-item"><a class="nav-link" href="table.html">Tabel Data</a></li>
      <li class="nav-item"><a class="nav-link" href="about.html">Tentang</a></li>
    </ul>
  </nav>

  <!-- MAIN CONTENT -->
  <main class="content-wrap">
    <div class="container py-4">
      <h1 class="h3 fw-bold mb-4">Membership Function</h1>
      <p class="text-secondary mb-4">Visualisasi fungsi keanggotaan untuk setiap variabel input Fuzzy Sugeno pada sistem TPMS (Tekanan, Suhu, dan Kecepatan).</p>

      <!-- TEKANAN -->
      <div class="card mb-4">
        <div class="card-header"><strong>1) Tekanan (psi)</strong></div>
        <div class="card-body">
          <canvas id="chartTekanan" height="120"></canvas>
          <table class="table table-sm table-bordered mt-3">
            <thead><tr><th>Kategori</th><th>Domain [a,b,c,d]</th></tr></thead>
            <tbody>
              <tr><td>Sangat Kurang</td><td>[0, 0, 16, 18]</td></tr>
              <tr><td>Kurang</td><td>[16, 18, 22, 24]</td></tr>
              <tr><td>Normal</td><td>[22, 24, 34, 36]</td></tr>
              <tr><td>Tinggi</td><td>[34, 36, 40, 40]</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- SUHU -->
      <div class="card mb-4">
        <div class="card-header"><strong>2) Suhu (°C)</strong></div>
        <div class="card-body">
          <canvas id="chartSuhu" height="120"></canvas>
          <table class="table table-sm table-bordered mt-3">
            <thead><tr><th>Kategori</th><th>Domain [a,b,c,d]</th></tr></thead>
            <tbody>
              <tr><td>Dingin</td><td>[0, 0, 16, 20]</td></tr>
              <tr><td>Normal</td><td>[16, 20, 30, 34]</td></tr>
              <tr><td>Panas</td><td>[30, 34, 40, 40]</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <!-- KECEPATAN -->
      <div class="card mb-4">
        <div class="card-header"><strong>3) Kecepatan (km/jam)</strong></div>
        <div class="card-body">
          <canvas id="chartKecepatan" height="120"></canvas>
          <table class="table table-sm table-bordered mt-3">
            <thead><tr><th>Kategori</th><th>Domain [a,b,c,d]</th></tr></thead>
            <tbody>
              <tr><td>Lambat</td><td>[0, 0, 15, 25]</td></tr>
              <tr><td>Normal</td><td>[15, 25, 45, 55]</td></tr>
              <tr><td>Cepat</td><td>[45, 55, 120, 120]</td></tr>
            </tbody>
          </table>
        </div>
      </div>

      <footer class="text-center small text-secondary mt-4">© 2025 – TPMS Fuzzy Sugeno</footer>
    </div>
  </main>

  <!-- SCRIPT -->
  <script>
    function toggleSidebar(){ document.getElementById('sidebar').classList.toggle('show'); }

    function trap(x,a,b,c,d){
      return x.map(v=>{
        if(v<=a||v>=d)return 0;
        if(v>a&&v<=b)return (v-a)/(b-a);
        if(v>b&&v<c)return 1;
        if(v>=c&&v<d)return (d-v)/(d-c);
        return 0;
      });
    }

    function makeChart(id,sets,range){
      const x = [];
      for(let i=range[0];i<=range[1];i+=1)x.push(i); // tanpa desimal
      const data = sets.map(s=>{
        return {
          label:s.name,
          borderColor:s.color,
          borderWidth:2,
          tension:0.1,
          data:trap(x,...s.dom),
        };
      });
      new Chart(document.getElementById(id),{
        type:'line',
        data:{labels:x,datasets:data},
        options:{
          scales:{
            x:{
              title:{display:true,text:'Nilai Domain'},
              ticks:{callback:v=>v}, // tampil bilangan bulat
              grid:{color:'rgba(255,255,255,0.05)'}
            },
            y:{
              title:{display:true,text:'Derajat Keanggotaan μ'},
              min:0,max:1,
              ticks:{callback:v=>v},
              grid:{color:'rgba(255,255,255,0.05)'}
            }
          },
          plugins:{legend:{labels:{color:'#e9edf3'}}}
        }
      });
    }

    makeChart('chartTekanan',[
      {name:'Sangat Kurang',color:'rgb(0,200,255)',dom:[0,0,16,18]},
      {name:'Kurang',color:'rgb(0,255,157)',dom:[16,18,22,24]},
      {name:'Normal',color:'rgb(255,213,79)',dom:[22,24,34,36]},
      {name:'Tinggi',color:'rgb(255,99,132)',dom:[34,36,40,40]}
    ],[0,40]);

    makeChart('chartSuhu',[
      {name:'Dingin',color:'rgb(0,200,255)',dom:[0,0,16,20]},
      {name:'Normal',color:'rgb(0,255,157)',dom:[16,20,30,34]},
      {name:'Panas',color:'rgb(255,99,132)',dom:[30,34,40,40]}
    ],[0,40]);

    makeChart('chartKecepatan',[
      {name:'Lambat',color:'rgb(0,200,255)',dom:[0,0,15,25]},
      {name:'Normal',color:'rgb(0,255,157)',dom:[15,25,45,55]},
      {name:'Cepat',color:'rgb(255,99,132)',dom:[45,55,120,120]}
    ],[0,120]);
  </script>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>
